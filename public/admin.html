<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Admin Panel - Pending Payments</h1>
<div id="payments"></div>

<script>
async function fetchPayments() {
    const res = await fetch('/api/admin/pending');
    const data = await res.json();
    const container = document.getElementById('payments');
    container.innerHTML = '';
    data.forEach(p => {
        const div = document.createElement('div');
        div.innerHTML = `
            <p>${p.name} | ${p.phone} | ${p.mpesa_code} | Status: ${p.status}</p>
            <button onclick="approve('${p._id}')">Approve</button>
            <button onclick="reject('${p._id}')">Reject</button>
        `;
        container.appendChild(div);
    });
}

async function approve(id) {
    await fetch('/api/admin/approve/' + id, { method: 'POST' });
    fetchPayments();
}

async function reject(id) {
    await fetch('/api/admin/reject/' + id, { method: 'POST' });
    fetchPayments();
}

fetchPayments();
</script>
</body>
</html>
